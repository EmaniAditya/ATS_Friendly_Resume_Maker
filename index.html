<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ATS Friendly Resume Maker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
      padding: 20px;
    }

    #resumePreview {
      background: white;
      width: 210mm;
      min-height: 297mm;
      max-height: 297mm; /* Limit to A4 height */
      padding: 20mm;
      margin: auto;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      font-family: Arial, sans-serif;
      overflow: hidden; /* Hide overflow content */
      position: relative;
    }

    .page-warning {
      display: none;
      color: #dc3545;
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
    }

    /* Compact mode styles */
    .compact-mode #resumePreview {
      font-size: 11px;
      line-height: 1.2;
      padding: 15mm;
    }

    .compact-mode #resumePreview h2 {
      font-size: 18px;
      margin-bottom: 5px;
    }

    .compact-mode #resumePreview h4 {
      font-size: 13px;
      margin-top: 10px;
      margin-bottom: 5px;
    }

    .compact-mode #resumePreview p {
      margin-bottom: 5px;
    }

    .compact-mode #resumePreview ul {
      margin-top: 5px;
      margin-bottom: 5px;
      padding-left: 20px;
    }

    .compact-mode #resumePreview li {
      margin-bottom: 2px;
    }

    .compact-mode .experience-entry,
    .compact-mode .education-entry,
    .compact-mode .project-entry {
      margin-bottom: 5px;
    }

    /* Toggle switch for compact mode */
    .form-check-label {
      user-select: none;
    }

    .template-classic h2 {
      font-weight: bold;
      font-size: 28px;
      text-align: center;
      margin-bottom: 10px;
    }

    .template-classic h4 {
      margin-top: 15px;
      border-bottom: 1px solid #333;
      padding-bottom: 4px;
      font-weight: bold;
    }

    .template-modern h2 {
      font-weight: bold;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .template-modern h4 {
      margin-top: 15px;
      color: #2a5885;
      font-weight: bold;
      border-bottom: 2px solid #2a5885;
      padding-bottom: 4px;
    }

    .template-minimalist h2 {
      font-weight: bold;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .template-minimalist h4 {
      margin-top: 15px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 14px;
    }

    .template-professional h2 {
      font-weight: bold;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .template-professional h4 {
      margin-top: 15px;
      font-weight: bold;
      background-color: #f8f9fa;
      padding: 5px;
    }

    .form-label {
      font-weight: bold;
    }

    .contact-info {
      margin-bottom: 15px;
    }

    .skill-item {
      display: inline-block;
      margin-right: 10px;
      margin-bottom: 5px;
    }

    .experience-item, .education-item, .project-item {
      margin-bottom: 15px;
    }

    .btn-add {
      margin-top: 5px;
    }

    .form-section {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
    }

    .section-title {
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }

    .ats-tip {
      font-size: 12px;
      color: #6c757d;
      margin-top: 5px;
    }

    /* Priority levels for content */
    .priority-high {
      opacity: 1;
    }
    
    .priority-medium {
      opacity: 0.95;
    }
    
    .priority-low {
      opacity: 0.9;
    }
    
    /* Extreme compact mode for very long content */
    .extreme-compact-mode #resumePreview {
      font-size: 10px;
      line-height: 1.1;
      padding: 12mm;
    }
    
    .extreme-compact-mode #resumePreview h2 {
      font-size: 16px;
      margin-bottom: 3px;
    }
    
    .extreme-compact-mode #resumePreview h4 {
      font-size: 12px;
      margin-top: 8px;
      margin-bottom: 3px;
    }
    
    .extreme-compact-mode #resumePreview p,
    .extreme-compact-mode #resumePreview ul,
    .extreme-compact-mode #resumePreview li {
      margin-bottom: 2px;
    }
    
    .extreme-compact-mode .experience-entry,
    .extreme-compact-mode .education-entry,
    .extreme-compact-mode .project-entry {
      margin-bottom: 3px;
    }
    
    .truncated-content {
      position: relative;
    }
    
    .truncated-content:after {
      content: "...";
      position: absolute;
      right: 0;
      bottom: 0;
    }
    
    /* Content density controls */
    .density-controls {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }
    
    .density-slider {
      flex-grow: 1;
      margin: 0 10px;
    }
    
    .density-label {
      font-size: 12px;
      color: #6c757d;
    }

    @media (max-width: 768px) {
      #resumePreview {
        width: 100%;
        padding: 15px;
        font-size: 14px;
      }

      .container {
        padding: 10px;
      }

      h1 {
        font-size: 24px;
      }

      .form-label {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center mb-4">ATS Friendly Resume Maker</h1>
    
    <div class="row">
      <div class="col-md-6">
        <!-- Form Sections -->
        <div class="form-section">
          <h3 class="section-title">Personal Information</h3>
          <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-control" id="name" placeholder="Full Name" required />
            <div class="ats-tip">Use your legal name as it appears on official documents</div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="email" placeholder="Email Address" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Phone Number</label>
              <input type="text" class="form-control" id="phone" placeholder="Phone Number" />
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">LinkedIn</label>
              <input type="text" class="form-control" id="linkedin" placeholder="LinkedIn URL" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Location</label>
              <input type="text" class="form-control" id="location" placeholder="City, State" />
            </div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Date of Birth (Optional)</label>
            <input type="text" class="form-control" id="dob" placeholder="DD/MM/YYYY" />
            <div class="ats-tip">Only include if specifically requested by the employer</div>
          </div>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Summary</h3>
          <div class="mb-3">
            <textarea class="form-control" id="summary" rows="4" placeholder="Brief professional summary (3-4 sentences)"></textarea>
            <div class="ats-tip">Include relevant keywords and highlight your expertise</div>
          </div>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Skills</h3>
          <div class="mb-3">
            <div id="skillsContainer">
              <div class="skill-group mb-2">
                <label class="form-label">Technical Skills</label>
                <input type="text" class="form-control" id="technicalSkills" placeholder="Technical skills (comma separated)" />
              </div>
              <div class="skill-group mb-2">
                <label class="form-label">Soft Skills</label>
                <input type="text" class="form-control" id="softSkills" placeholder="Soft skills (comma separated)" />
              </div>
              <div class="mb-2">
                <label class="form-label">Add Individual Skills with Ratings (Optional)</label>
                <div class="ats-tip">Adding individual skills with ratings can help highlight your proficiency levels</div>
                <div id="ratedSkillsContainer">
                  <div class="rated-skill-item input-group mb-2">
                    <input type="text" class="form-control skillName" placeholder="Skill name (e.g., Python, Project Management)" />
                    <select class="form-select skillRating" style="max-width: 150px;">
                      <option value="Beginner">Beginner</option>
                      <option value="Intermediate">Intermediate</option>
                      <option value="Advanced">Advanced</option>
                      <option value="Expert">Expert</option>
                    </select>
                    <button type="button" class="btn btn-outline-secondary" onclick="removeRatedSkill(this)">Ã—</button>
                  </div>
                </div>
                <button type="button" class="btn btn-sm btn-outline-secondary" onclick="addRatedSkill()">+ Add Skill with Rating</button>
              </div>
            </div>
            <div class="ats-tip">Include specific technologies, programming languages, and tools</div>
          </div>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Languages</h3>
          <div id="languagesContainer">
            <div class="language-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Language</label>
                  <input type="text" class="form-control language" placeholder="Language Name" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Proficiency</label>
                  <select class="form-control proficiency">
                    <option value="Native">Native</option>
                    <option value="Fluent">Fluent</option>
                    <option value="Advanced">Advanced</option>
                    <option value="Intermediate">Intermediate</option>
                    <option value="Basic">Basic</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addLanguage()">+ Add Another Language</button>
        </div>

        <div class="form-section">
          <h3 class="section-title">Achievements & Honors</h3>
          <div id="achievementsContainer">
            <div class="achievement-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Title</label>
                  <input type="text" class="form-control achievementTitle" placeholder="Achievement or Honor Title" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Date</label>
                  <input type="text" class="form-control achievementDate" placeholder="MM/YYYY" />
                </div>
              </div>
              <div class="mb-2">
                <label class="form-label">Description (Optional)</label>
                <textarea class="form-control achievementDescription" rows="2" placeholder="Brief description of the achievement"></textarea>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addAchievement()">+ Add Another Achievement</button>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Experience</h3>
          <div id="experienceContainer">
            <div class="experience-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Company</label>
                  <input type="text" class="form-control company" placeholder="Company Name" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Job Title</label>
                  <input type="text" class="form-control title" placeholder="Job Title" />
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Start Date</label>
                  <input type="text" class="form-control startDate" placeholder="MM/YYYY" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">End Date</label>
                  <input type="text" class="form-control endDate" placeholder="MM/YYYY or Present" />
                </div>
              </div>
              <div class="mb-2">
                <label class="form-label">Responsibilities & Achievements</label>
                <textarea class="form-control description" rows="3" placeholder="â€¢ Use bullet points starting with action verbs&#10;â€¢ Quantify achievements when possible&#10;â€¢ Include relevant keywords"></textarea>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addExperience()">+ Add Another Experience</button>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Education</h3>
          <div id="educationContainer">
            <div class="education-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Institution</label>
                  <input type="text" class="form-control institution" placeholder="University/College Name" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Degree</label>
                  <input type="text" class="form-control degree" placeholder="Degree & Major" />
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Start Date</label>
                  <input type="text" class="form-control educationStartDate" placeholder="MM/YYYY" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">End Date</label>
                  <input type="text" class="form-control educationEndDate" placeholder="MM/YYYY or Expected MM/YYYY" />
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">GPA/Percentage</label>
                  <div class="input-group">
                    <input type="text" class="form-control gpa" placeholder="Score (e.g., 3.8 or 85%)" />
                    <select class="form-select scoreType" style="max-width: 100px;">
                      <option value="gpa">GPA</option>
                      <option value="percentage">Percentage</option>
                      <option value="none">None</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Location (Optional)</label>
                  <input type="text" class="form-control educationLocation" placeholder="City, State/Country" />
                </div>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addEducation()">+ Add Another Education</button>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Certifications</h3>
          <div id="certificationsContainer">
            <div class="certification-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Certification Name</label>
                  <input type="text" class="form-control certificationName" placeholder="Certification Title" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Issuing Organization</label>
                  <input type="text" class="form-control certificationOrg" placeholder="Issuing Organization" />
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Issue Date</label>
                  <input type="text" class="form-control certificationDate" placeholder="MM/YYYY" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Expiration Date (Optional)</label>
                  <input type="text" class="form-control certificationExpiration" placeholder="MM/YYYY or No Expiration" />
                </div>
              </div>
              <div class="mb-2">
                <label class="form-label">Credential ID (Optional)</label>
                <input type="text" class="form-control credentialID" placeholder="Credential ID" />
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addCertification()">+ Add Another Certification</button>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Projects</h3>
          <div id="projectsContainer">
            <div class="project-item">
              <div class="row mb-2">
                <div class="col-md-6">
                  <label class="form-label">Project Name</label>
                  <input type="text" class="form-control projectName" placeholder="Project Name" />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Technologies</label>
                  <input type="text" class="form-control technologies" placeholder="Technologies Used" />
                </div>
              </div>
              <div class="mb-2">
                <label class="form-label">Description</label>
                <textarea class="form-control projectDescription" rows="3" placeholder="â€¢ Describe the project and your role&#10;â€¢ Highlight challenges overcome&#10;â€¢ Mention outcomes and impact"></textarea>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-sm btn-outline-secondary btn-add" onclick="addProject()">+ Add Another Project</button>
        </div>
        
        <div class="form-section">
          <h3 class="section-title">Template & Export</h3>
          <div class="mb-3">
            <label class="form-label">Template Style</label>
            <select class="form-select" id="template" onchange="generateResume()">
              <option value="classic">Classic</option>
              <option value="modern">Modern</option>
              <option value="minimalist">Minimalist</option>
              <option value="professional">Professional</option>
            </select>
            <div class="ats-tip">Classic template has the highest ATS compatibility</div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Resume Versions</label>
            <button type="button" class="btn btn-outline-primary w-100" onclick="showVersionsModal()">Manage Saved Versions</button>
            <div class="ats-tip">Your resume versions are saved locally in your browser</div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Data Management</label>
            <div class="row">
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-outline-primary w-100" onclick="exportData()">Export Data</button>
              </div>
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-outline-primary w-100" data-bs-toggle="modal" data-bs-target="#importModal">Import Data</button>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-12">
                <button type="button" class="btn btn-outline-danger w-100" onclick="clearForm()">Clear All Form Data</button>
              </div>
            </div>
            <div class="ats-tip">Export your data for backup or transfer to another device</div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Export Options</label>
            <div class="row">
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-primary w-100" onclick="generateResume()">Preview Resume</button>
              </div>
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-success w-100" onclick="downloadPDF()">Download PDF</button>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-outline-secondary w-100" onclick="viewPlainText()">View Plain Text</button>
              </div>
              <div class="col-md-6 mb-2">
                <button type="button" class="btn btn-outline-secondary w-100" onclick="downloadPlainText()">Download Plain Text</button>
              </div>
            </div>
            <div class="ats-tip">Plain text version is useful for copying into online application forms</div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Section Order</label>
            <div class="ats-tip">Drag and drop sections to customize their order in your resume</div>
            <div class="section-order-container">
              <ul id="sectionOrder" class="list-group">
                <li class="list-group-item" data-section="summary">Summary</li>
                <li class="list-group-item" data-section="skills">Skills</li>
                <li class="list-group-item" data-section="experience">Experience</li>
                <li class="list-group-item" data-section="education">Education</li>
                <li class="list-group-item" data-section="projects">Projects</li>
                <li class="list-group-item" data-section="certifications">Certifications</li>
                <li class="list-group-item" data-section="languages">Languages</li>
                <li class="list-group-item" data-section="achievements">Achievements & Honors</li>
              </ul>
            </div>
          </div>
          
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="compactMode" checked>
            <label class="form-check-label" for="compactMode">Single-page mode (automatically fit content to one page)</label>
          </div>
          
          <div class="mb-3">
            <div id="pageWarning" class="page-warning">
              Content may exceed one page. Enable single-page mode to auto-fit.
            </div>
          </div>
          
          <div class="d-grid gap-2">
            <button type="button" class="btn btn-primary" onclick="generateResume()">Preview Resume</button>
            <div class="btn-group mt-2">
              <button type="button" class="btn btn-success" onclick="downloadPDF()">Download PDF</button>
              <button type="button" class="btn btn-outline-secondary" onclick="downloadPlainText()">Download Plain Text</button>
              <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#plainTextModal">View Plain Text</button>
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3 class="section-title">ATS Optimization</h3>
          <div class="mb-3">
            <label class="form-label">Job Description Analysis</label>
            <textarea class="form-control" id="jobDescription" rows="4" placeholder="Paste job description here to analyze keyword matches and optimize your resume"></textarea>
            <div class="ats-tip">Paste the job description to highlight matching keywords and optimize your resume</div>
          </div>
          <div class="mb-3">
            <button type="button" class="btn btn-outline-primary w-100" onclick="analyzeJobDescription()">Analyze Keywords</button>
          </div>
          <div id="keywordResults" class="mb-3" style="display: none;">
            <div class="card">
              <div class="card-header d-flex justify-content-between align-items-center">
                <span>Keyword Analysis</span>
                <span class="badge bg-primary" id="matchScore">0%</span>
              </div>
              <div class="card-body">
                <h6>Matched Keywords:</h6>
                <div id="matchedKeywords" class="mb-2"></div>
                <h6>Missing Keywords:</h6>
                <div id="missingKeywords"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div id="resumePreview" class="mt-3"></div>
      </div>
    </div>
  </div>

  <!-- Plain Text Modal -->
  <div class="modal fade" id="plainTextModal" tabindex="-1" aria-labelledby="plainTextModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="plainTextModalLabel">Plain Text Resume (ATS-Friendly Format)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted mb-2">Copy this text for pasting into online application forms:</p>
          <div class="bg-light p-3 border rounded">
            <pre id="plainTextContent" class="mb-0" style="white-space: pre-wrap; font-family: monospace;"></pre>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="copyPlainText()">Copy to Clipboard</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Versions Modal -->
  <div class="modal fade" id="versionsModal" tabindex="-1" aria-labelledby="versionsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="versionsModalLabel">Saved Resume Versions</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="versionsModalContent">
            <!-- Content will be populated dynamically -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#saveVersionModal">Save Current Version</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Save Version Modal -->
  <div class="modal fade" id="saveVersionModal" tabindex="-1" aria-labelledby="saveVersionModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="saveVersionModalLabel">Save Resume Version</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="versionName" class="form-label">Version Name</label>
            <input type="text" class="form-control" id="versionName" placeholder="e.g., Software Developer Resume, Google Application">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="saveNamedVersion()">Save Version</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="toastNotification" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto">ATS Resume Maker</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Resume saved successfully!
      </div>
    </div>
  </div>

  <!-- Import Modal -->
  <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="importModalLabel">Import Resume Data</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="importFileInput" class="form-label">Select JSON File</label>
            <input type="file" class="form-control" id="importFileInput" accept=".json">
            <div class="form-text">Select a previously exported JSON file to import your resume data.</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="importData()">Import Data</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    // Constants for localStorage
    const VERSIONS_KEY = 'ats_resume_versions';
    const CURRENT_DATA_KEY = 'ats_resume_current_data';
    
    // Sample resume data
    const SAMPLE_RESUME_DATA = {
      fullName: "E S AADITYA REDDY",
      jobTitle: "Software Developer | MERN Stack",
      phone: "+91 7587202379",
      email: "esaadityareddy@gmail.com",
      github: "github.com/EmaniAditya",
      website: "emaniaditya.github.io",
      location: "Raipur, India",
      dob: "05 Nov 2004",
      summary: "Developer with 1 year of experience delivering full-stack solutions using Node.js, Express, React, and MongoDB. Rapidly ramped up Java Spring Boot and Camunda to prototype automated API health checks and issue-routing workflows at Accenture. Versatile across JavaScript and Java ecosystems, excels in REST API design, database integration, and agile delivery.",
      experience: [
        {
          company_name: "Accenture",
          job_title: "Software Engineering Intern",
          start_date: "05/2025",
          end_date: "07/2025",
          location: "Bengaluru, Karnataka",
          description: "- Built and tested REST APIs in Java Spring Boot to understand backend patterns\n- Learned Camunda BPM basics and modeled simple workflows to prototype API health checks"
        },
        {
          company_name: "KODAAC (Kodagians Alumni Association)",
          job_title: "Web Development Intern",
          start_date: "01/2025",
          end_date: "04/2025",
          location: "Bengaluru, Karnataka",
          description: "- Collaborated with teams to manage data collection and improve web performance\n- Enhanced existing systems through bug fixes and feature development"
        }
      ],
      education: [
        {
          school_name: "SRU, Raipur",
          degree: "Bachelor of Technology, Computer Science and Engineering",
          education_start_date: "08/2022",
          education_end_date: "Present",
          education_location: "",
          gpa: "",
          score_type: "none"
        },
        {
          school_name: "Sainik School, Kodagu",
          degree: "VI - XII (Sr. Secondary)",
          education_start_date: "07/2015",
          education_end_date: "07/2022",
          education_location: "",
          gpa: "",
          score_type: "none"
        }
      ],
      projects: [
        {
          project_name: "API Workflow Prototype (Accenture)",
          project_description: "Rapid-prototype of REST API health checks and automated issue-routing workflows.\nIntegrated Camunda flows with ServiceNow for automated logging and severity-based task triggers",
          project_technologies: "Java, Spring Boot, Camunda",
          project_link: "",
          project_github: ""
        },
        {
          project_name: "Blog Application",
          project_description: "Developed a blog system using MongoDB, Express.js, React.js, and Node.js.\nImplemented user authentication and post management features.",
          project_technologies: "A full-stack MERN app.",
          project_link: "Click Here",
          project_github: "GitHub"
        },
        {
          project_name: "Front Page Maker",
          project_description: "Created a tool to help students build project front pages with customizable text and logos.\nSupports one-click PDF generation and works across devices.",
          project_technologies: "PDF Generator Tool.",
          project_link: "Click Here",
          project_github: "GitHub"
        }
      ],
      skills: "Frontend & Client-Side\nReact.js Â· Tailwind CSS Â· Responsive UI Development\n\nBackend & API Engineering\nNode.js Â· Express.js Â· REST API Design & CRUD Â· MongoDB Â· MySQL Â· Java (Spring Boot basics)\n\nWorkflow Automation & Tooling\nCamunda BPM Â· Git Â· GitHub",
      achievements: [
        {
          achievement_title: "Production MERN Applications",
          achievement_date: "",
          achievement_description: "Deployed two full-stack MERN apps serving 750+ students and streamlining workflows"
        },
        {
          achievement_title: "Rapid Java & Camunda Onboarding",
          achievement_date: "",
          achievement_description: "Mastered Spring Boot and Camunda fundamentals in 2 weeks to prototype API health-check workflows."
        },
        {
          achievement_title: "ðŸš€ Deployed Student Utility Tool",
          achievement_date: "",
          achievement_description: "Front Page Maker (click here) helped 750+ students generate curated project front pages instantly."
        }
      ],
      certifications: [
        {
          certification_name: "AWS Cloud Practitioner",
          certification_org: "Amazon Web Services",
          certification_date: "03/2025",
          certification_expiration: "03/2028",
          credential_id: "AWS-CP-12345"
        },
        {
          certification_name: "JavaScript Algorithms and Data Structures",
          certification_org: "freeCodeCamp",
          certification_date: "11/2024",
          certification_expiration: "",
          credential_id: "FCC-JADS-67890"
        }
      ],
      languages: [
        {
          language: "English",
          proficiency: "Fluent"
        },
        {
          language: "Hindi",
          proficiency: "Native"
        },
        {
          language: "Kannada",
          proficiency: "Basic"
        }
      ],
      template: "classic",
      sectionOrder: ["summary", "skills", "experience", "education", "projects", "certifications", "languages", "achievements"]
    };
    
    // Load sample data into the form
    function loadSampleData() {
      // Only load sample if there's no existing data in localStorage
      if (!localStorage.getItem(CURRENT_DATA_KEY)) {
        populateFormData(SAMPLE_RESUME_DATA);
        generateResume();
        showToast("Sample resume loaded! Edit to customize your own resume.");
      }
    }
    
    // Helper function to populate multi-item sections
    function populateMultiItemSection(sectionType, items) {
      if (!items || !items.length) return;
      
      // Get container
      const container = document.getElementById(`${sectionType}Container`);
      if (!container) return;
      
      // Get the first item template
      const firstItem = container.querySelector(`.${sectionType}-item`);
      if (!firstItem) return;
      
      // Clear the container
      container.innerHTML = '';
      
      // Add and populate items
      items.forEach((itemData, index) => {
        // For the first item, clone the template
        if (index === 0) {
          const clonedItem = firstItem.cloneNode(true);
          container.appendChild(clonedItem);
          populateItemFields(clonedItem, itemData);
        } else {
          // For additional items, use the appropriate add function
          switch(sectionType) {
            case 'experience':
              addExperience();
              break;
            case 'education':
              addEducation();
              break;
            case 'certifications':
              addCertification();
              break;
            case 'projects':
              addProject();
              break;
            case 'languages':
              addLanguage();
              break;
            case 'achievements':
              addAchievement();
              break;
          }
          
          // Populate the newly added item
          const newItem = container.lastElementChild;
          populateItemFields(newItem, itemData);
        }
      });
    }
    
    // Helper function to populate fields in an item
    function populateItemFields(item, data) {
      if (!item || !data) return;
      
      // Get all input, select, and textarea elements
      const inputs = item.querySelectorAll('input, select, textarea');
      
      // For each input, find the corresponding data
      inputs.forEach(input => {
        const classList = input.className.split(' ');
        
        // Find the relevant class name (not form-control, form-select, etc.)
        const className = classList.find(cls => 
          !cls.includes('form-') && 
          cls !== 'input-group' && 
          cls !== 'form-check-input'
        );
        
        if (className) {
          // Convert camelCase to snake_case for data lookup
          const dataKey = className.replace(/([A-Z])/g, '_$1').toLowerCase().replace(/^_/, '');
          
          if (data[dataKey] !== undefined) {
            if (input.tagName === 'SELECT') {
              // For select elements, set the value and trigger change event
              input.value = data[dataKey] || '';
              
              // Create and dispatch change event
              const event = new Event('change', { bubbles: true });
              input.dispatchEvent(event);
            } else {
              // For regular inputs and textareas
              input.value = data[dataKey] || '';
            }
          }
        }
      });
    }
    
    // Load a specific version
    function loadVersion(versionId) {
      const versions = getVersions();
      const version = versions.find(v => v.id === versionId);
      
      if (version) {
        populateFormData(version.data);
        
        // Close the modal
        const versionsModal = bootstrap.Modal.getInstance(document.getElementById('versionsModal'));
        if (versionsModal) {
          versionsModal.hide();
        }
        
        // Show success message
        showToast(`Loaded resume version: "${version.name}"`);
        
        return true;
      }
      
      return false;
    }
    
    // Show toast notification with type
    function showToast(message, type = 'success') {
      const toastElement = document.getElementById('toastNotification');
      const toastBody = toastElement.querySelector('.toast-body');
      toastBody.textContent = message;
      
      // Set toast color based on type
      const toastHeader = toastElement.querySelector('.toast-header');
      toastHeader.className = 'toast-header';
      
      if (type === 'error') {
        toastHeader.classList.add('bg-danger', 'text-white');
      } else if (type === 'warning') {
        toastHeader.classList.add('bg-warning');
      } else {
        toastHeader.classList.add('bg-success', 'text-white');
      }
      
      const toast = new bootstrap.Toast(toastElement);
      toast.show();
    }
    
    // Initialize with saved data or preview
    window.addEventListener('DOMContentLoaded', function() {
      // Try to load saved data
      const savedData = localStorage.getItem(CURRENT_DATA_KEY);
      if (savedData) {
        try {
          const parsedData = JSON.parse(savedData);
          populateFormData(parsedData);
          generateResume();
          console.log("Loaded saved data");
        } catch (e) {
          console.error("Error loading saved data:", e);
          loadSampleData(); // Load sample data as fallback
        }
      } else {
        // No saved data, load sample data
        loadSampleData();
      }
      
      // ... existing initialization code ...
    });
    
    // ... existing code ...
  </script>
</body>
<!-- Footer -->
<footer class="mt-5 py-3 bg-light">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <p class="mb-0">
          <small class="text-muted">
            Designed by <a href="https://github.com/anjalisahu4644" target="_blank">@anjalisahu4644</a> | 
            Developed by <a href="https://github.com/EmaniAditya" target="_blank">@EmaniAditya</a>
          </small>
        </p>
      </div>
    </div>
  </div>
</footer>
</html>
